import{c as e,j as s,C as a,I as t,X as l}from"./app-CE4iXgnb.js";import{r,u as c,H as i,L as d}from"./inertia-CDxxuqzl.js";import{A as o}from"./AuthenticatedLayout-CAzOOrEZ.js";import{C as n}from"./circle-alert-CAyIN-rJ.js";import{C as m}from"./users-Dbj6gQ98.js";import{F as h}from"./file-down-BNXruvyr.js";import{F as u}from"./funnel-CdFLKB9r.js";import{S as x}from"./user-plus-D75hMPXL.js";import{F as g}from"./file-text-j-URzPkl.js";import{F as b}from"./file-spreadsheet-D0fTGdqf.js";import{P as p}from"./plus-BNX_hsqU.js";import{L as j}from"./loader-circle-ByBbcD6p.js";import{E as f}from"./eye-CYms5AqN.js";import{D as y}from"./download-D3HUmGeS.js";import{R as v}from"./refresh-cw-DKrALaeP.js";import{A as N}from"./arrow-left-kjLDD8xV.js";import"./vendor--zLKLCTa.js";import"./app-BHp0F1kE.js";import"./transition-tl5wXdCp.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=e("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);function _({auth:e,stats:_,filters:k}){const[C,S]=r.useState(!1),[D,E]=r.useState(0),[M,A]=r.useState(!1),[F,L]=r.useState([]),[Y,O]=r.useState(!1),[R,I]=r.useState(!1),[P,G]=r.useState({showing:0,total:0}),[U,T]=r.useState(null),{data:$,setData:X,processing:q}=c({search:"",local_church:"",church_group:"",membership_status:"",gender:"",age_group:"",date_range:"all",start_date:"",end_date:"",format:"csv",include_family_info:!0,include_contact_info:!0,include_church_details:!0,include_personal_info:!0,date_format:"Y-m-d",encoding:"utf-8",sort_by:"last_name",sort_direction:"asc",limit:"",selected_fields:[]}),B=r.useMemo(()=>({total_members:(null==_?void 0:_.total_members)||0,by_church:(null==_?void 0:_.by_church)||{},by_group:(null==_?void 0:_.by_group)||{},by_status:(null==_?void 0:_.by_status)||{},recent_exports:(null==_?void 0:_.recent_exports)||[]}),[_]),H=r.useMemo(()=>({local_churches:(null==k?void 0:k.local_churches)||[],church_groups:(null==k?void 0:k.church_groups)||[],membership_statuses:(null==k?void 0:k.membership_statuses)||[],genders:(null==k?void 0:k.genders)||[]}),[k]),z=r.useMemo(()=>[{id:"id",label:"Member ID",category:"basic"},{id:"first_name",label:"First Name",category:"personal"},{id:"middle_name",label:"Middle Name",category:"personal"},{id:"last_name",label:"Last Name",category:"personal"},{id:"date_of_birth",label:"Date of Birth",category:"personal"},{id:"age",label:"Age",category:"personal"},{id:"gender",label:"Gender",category:"personal"},{id:"id_number",label:"ID Number",category:"personal"},{id:"phone",label:"Phone",category:"contact"},{id:"email",label:"Email",category:"contact"},{id:"residence",label:"Residence",category:"contact"},{id:"emergency_contact",label:"Emergency Contact",category:"contact"},{id:"emergency_phone",label:"Emergency Phone",category:"contact"},{id:"local_church",label:"Local Church",category:"church"},{id:"church_group",label:"Church Group",category:"church"},{id:"membership_status",label:"Membership Status",category:"church"},{id:"membership_date",label:"Membership Date",category:"church"},{id:"baptism_date",label:"Baptism Date",category:"church"},{id:"confirmation_date",label:"Confirmation Date",category:"church"},{id:"matrimony_status",label:"Matrimony Status",category:"church"},{id:"occupation",label:"Occupation",category:"personal"},{id:"education_level",label:"Education Level",category:"personal"},{id:"family_name",label:"Family Name",category:"family"},{id:"family_head",label:"Family Head",category:"family"},{id:"parent",label:"Parent/Guardian",category:"family"},{id:"sponsor",label:"Sponsor",category:"church"},{id:"minister",label:"Minister",category:"church"},{id:"tribe",label:"Tribe",category:"personal"},{id:"clan",label:"Clan",category:"personal"},{id:"notes",label:"Notes",category:"other"},{id:"created_at",label:"Created Date",category:"other"},{id:"updated_at",label:"Updated Date",category:"other"}],[]),Q=r.useMemo(()=>{let e=B.total_members;return $.local_church&&(e=B.by_church[$.local_church]||0),$.church_group&&(e=Math.min(e,B.by_group[$.church_group]||0)),$.membership_status&&(e=Math.min(e,B.by_status[$.membership_status]||0)),$.limit&&parseInt($.limit)>0&&(e=Math.min(e,parseInt($.limit))),e},[B,$]),W=r.useCallback((e,s)=>{T({type:e,message:s}),setTimeout(()=>T(null),5e3)},[]),J=r.useCallback(e=>{X("selected_fields",$.selected_fields.includes(e)?$.selected_fields.filter(s=>s!==e):[...$.selected_fields,e])},[$.selected_fields,X]),V=r.useCallback(e=>{const s=z.filter(s=>s.category===e).map(e=>e.id),a=[...new Set([...$.selected_fields,...s])];X("selected_fields",a)},[z,$.selected_fields,X]),K=r.useCallback(e=>{const s=z.filter(s=>s.category===e).map(e=>e.id),a=$.selected_fields.filter(e=>!s.includes(e));X("selected_fields",a)},[z,$.selected_fields,X]),Z=r.useCallback(async()=>{S(!0),E(10);try{const e=new URLSearchParams(Object.fromEntries(Object.entries($).map(([e,s])=>[e,Array.isArray(s)?s.join(","):String(s)])));E(30);const s=await fetch(`/members/export/download?${e}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json, application/octet-stream"}});if(E(60),!s.ok){const e=await s.text();let a="Export failed";try{a=JSON.parse(e).error||a}catch{a=e||a}throw new Error(a)}{const e=await s.blob(),a=window.URL.createObjectURL(e),t=document.createElement("a");t.href=a,t.download=`members_export_${(new Date).toISOString().split("T")[0]}.${$.format}`,document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(a),document.body.removeChild(t),E(100),setTimeout(()=>{E(0),W("success",`Export completed successfully! Downloaded ${Q} records as ${$.format.toUpperCase()}.`)},1e3)}}catch(e){E(0),W("error",e instanceof Error?e.message:"Export failed. Please try again.")}finally{S(!1)}},[$,Q,W]),ee=r.useCallback(async()=>{I(!0);try{const e=new URLSearchParams(Object.fromEntries(Object.entries($).map(([e,s])=>[e,Array.isArray(s)?s.join(","):String(s)]))),s=await fetch(`/members/export/preview?${e}`,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});if(!s.ok){const e=await s.json();throw new Error(e.error||"Failed to load preview")}{const e=await s.json();L(e.preview_data||[]),G({showing:e.showing||0,total:e.total_count||0}),O(!0)}}catch(e){W("error",e instanceof Error?e.message:"Failed to load preview")}finally{I(!1)}},[$,W]),se=r.useMemo(()=>["basic","personal","contact","church","family","other"].reduce((e,s)=>(e[s]=z.filter(e=>e.category===s),e),{}),[z]);r.useCallback(e=>{const s=se[e]||[],a=s.filter(e=>$.selected_fields.includes(e.id)).length;return 0===a?"none":a===s.length?"all":"partial"},[se,$.selected_fields]);const ae=r.useCallback(e=>({basic:"Basic Information",personal:"Personal Details",contact:"Contact Information",church:"Church Details",family:"Family Information",other:"Other Fields"}[e]||e),[]);return s.jsxs(o,{header:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(d,{href:route("members.index"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(N,{className:"w-5 h-5"}),"Back to Members"]}),s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Export Members"})]}),children:[s.jsx(i,{title:"Export Members"}),s.jsx("div",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[U&&s.jsxs("div",{className:"mb-6 p-4 rounded-lg flex items-center gap-3 "+("success"===U.type?"bg-green-50 text-green-800 border border-green-200":"error"===U.type?"bg-red-50 text-red-800 border border-red-200":"warning"===U.type?"bg-yellow-50 text-yellow-800 border border-yellow-200":"bg-blue-50 text-blue-800 border border-blue-200"),children:["success"===U.type&&s.jsx(a,{className:"w-5 h-5 flex-shrink-0"}),"error"===U.type&&s.jsx(n,{className:"w-5 h-5 flex-shrink-0"}),"warning"===U.type&&s.jsx(n,{className:"w-5 h-5 flex-shrink-0"}),"info"===U.type&&s.jsx(t,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("span",{className:"flex-1",children:U.message}),s.jsx("button",{onClick:()=>T(null),className:"text-current hover:opacity-70",children:s.jsx(l,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(m,{className:"w-5 h-5"}),"Export Statistics"]})}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:B.total_members}),s.jsx("div",{className:"text-sm text-blue-800",children:"Total Members"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:Object.keys(B.by_church).length}),s.jsx("div",{className:"text-sm text-green-800",children:"Churches"})]}),s.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Object.keys(B.by_group).length}),s.jsx("div",{className:"text-sm text-purple-800",children:"Groups"})]}),s.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:Q}),s.jsx("div",{className:"text-sm text-orange-800",children:"Estimated Export"})]})]}),B.recent_exports.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Recent Exports"}),s.jsx("div",{className:"space-y-2",children:B.recent_exports.map((e,a)=>s.jsxs("div",{className:"flex justify-between items-center text-sm bg-gray-50 p-3 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(h,{className:"w-4 h-4 text-gray-500"}),s.jsx("span",{children:e.date}),s.jsxs("span",{className:"text-gray-500",children:["(",e.format.toUpperCase(),")"]})]}),s.jsxs("div",{className:"text-gray-600",children:[e.records," records (",e.file_size,")"]})]},a))})]})]})]}),s.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(u,{className:"w-5 h-5"}),"Filter Members"]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),s.jsx("input",{type:"text",value:$.search,onChange:e=>X("search",e.target.value),placeholder:"Search by name, phone, email...",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local Church"}),s.jsxs("select",{value:$.local_church,onChange:e=>X("local_church",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Churches"}),H.local_churches.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Church Group"}),s.jsxs("select",{value:$.church_group,onChange:e=>X("church_group",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Groups"}),H.church_groups.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Membership Status"}),s.jsxs("select",{value:$.membership_status,onChange:e=>X("membership_status",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Statuses"}),H.membership_statuses.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),s.jsxs("select",{value:$.gender,onChange:e=>X("gender",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Genders"}),H.genders.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age Group"}),s.jsxs("select",{value:$.age_group,onChange:e=>X("age_group",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"All Ages"}),s.jsx("option",{value:"children",children:"Children (0-12)"}),s.jsx("option",{value:"youth",children:"Youth (13-24)"}),s.jsx("option",{value:"adults",children:"Adults (25-59)"}),s.jsx("option",{value:"seniors",children:"Seniors (60+)"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),s.jsxs("select",{value:$.date_range,onChange:e=>X("date_range",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Time"}),s.jsx("option",{value:"this_year",children:"This Year"}),s.jsx("option",{value:"last_year",children:"Last Year"}),s.jsx("option",{value:"last_6_months",children:"Last 6 Months"}),s.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),s.jsx("option",{value:"custom",children:"Custom Range"})]})]}),"custom"===$.date_range&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),s.jsx("input",{type:"date",value:$.start_date,onChange:e=>X("start_date",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),s.jsx("input",{type:"date",value:$.end_date,onChange:e=>X("end_date",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limit Records"}),s.jsx("input",{type:"number",value:$.limit,onChange:e=>X("limit",e.target.value),placeholder:"Leave empty for all records",min:"1",className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[s.jsx(x,{className:"w-5 h-5"}),"Export Options"]})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("button",{onClick:()=>X("format","csv"),className:"p-4 border rounded-lg text-center transition-colors "+("csv"===$.format?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[s.jsx(g,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("div",{className:"font-medium",children:"CSV"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Comma Separated"})]}),s.jsxs("button",{onClick:()=>X("format","excel"),className:"p-4 border rounded-lg text-center transition-colors "+("excel"===$.format?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[s.jsx(b,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("div",{className:"font-medium",children:"Excel"}),s.jsx("div",{className:"text-xs text-gray-500",children:"XLSX Format"})]}),s.jsxs("button",{onClick:()=>X("format","pdf"),className:"p-4 border rounded-lg text-center transition-colors "+("pdf"===$.format?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[s.jsx(g,{className:"w-8 h-8 mx-auto mb-2"}),s.jsx("div",{className:"font-medium",children:"PDF"}),s.jsx("div",{className:"text-xs text-gray-500",children:"Portable Document"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Include Information"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:$.include_personal_info,onChange:e=>X("include_personal_info",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Personal Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:$.include_contact_info,onChange:e=>X("include_contact_info",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Contact Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:$.include_church_details,onChange:e=>X("include_church_details",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Church Details"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:$.include_family_info,onChange:e=>X("include_family_info",e.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500"}),s.jsx("span",{className:"ml-2 text-sm text-gray-900",children:"Family Information"})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsxs("button",{onClick:()=>A(!M),className:"flex items-center gap-2 text-sm font-medium text-blue-600 hover:text-blue-800",children:[s.jsx(x,{className:"w-4 h-4"}),"Advanced Options",M?s.jsx(w,{className:"w-4 h-4"}):s.jsx(p,{className:"w-4 h-4"})]}),M&&s.jsxs("div",{className:"mt-4 space-y-4 pl-6 border-l-2 border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort By"}),s.jsxs("select",{value:$.sort_by,onChange:e=>X("sort_by",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"last_name",children:"Last Name"}),s.jsx("option",{value:"first_name",children:"First Name"}),s.jsx("option",{value:"age",children:"Age"}),s.jsx("option",{value:"membership_date",children:"Membership Date"}),s.jsx("option",{value:"created_at",children:"Created Date"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Direction"}),s.jsxs("select",{value:$.sort_direction,onChange:e=>X("sort_direction",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"asc",children:"Ascending"}),s.jsx("option",{value:"desc",children:"Descending"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Format"}),s.jsxs("select",{value:$.date_format,onChange:e=>X("date_format",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"Y-m-d",children:"YYYY-MM-DD"}),s.jsx("option",{value:"d/m/Y",children:"DD/MM/YYYY"}),s.jsx("option",{value:"m/d/Y",children:"MM/DD/YYYY"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Encoding"}),s.jsxs("select",{value:$.encoding,onChange:e=>X("encoding",e.target.value),className:"w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"utf-8",children:"UTF-8"}),s.jsx("option",{value:"iso-8859-1",children:"ISO-8859-1"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Field Selection"}),s.jsx("div",{className:"space-y-4",children:Object.entries(se).map(([e,a])=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:ae(e)}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>V(e),className:"text-xs text-blue-600 hover:text-blue-800",children:"Select All"}),s.jsx("button",{onClick:()=>K(e),className:"text-xs text-gray-600 hover:text-gray-800",children:"Deselect All"})]})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:a.map(e=>s.jsxs("label",{className:"flex items-center text-sm",children:[s.jsx("input",{type:"checkbox",checked:$.selected_fields.includes(e.id),onChange:()=>J(e.id),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:ring-blue-500 mr-2"}),e.label]},e.id))})]},e))})]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Export Actions"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("button",{onClick:ee,disabled:R,className:"w-full flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50",children:[R?s.jsx(j,{className:"w-5 h-5 animate-spin"}):s.jsx(f,{className:"w-5 h-5"}),R?"Loading...":"Preview Data"]}),s.jsxs("button",{onClick:Z,disabled:C||q,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg transition-colors disabled:opacity-50",children:[C?s.jsx(j,{className:"w-5 h-5 animate-spin"}):s.jsx(y,{className:"w-5 h-5"}),C?"Exporting...":"Export Data"]}),C&&D>0&&s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${D}%`}})}),s.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full flex items-center justify-center gap-2 bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-4 rounded-lg transition-colors",children:[s.jsx(v,{className:"w-5 h-5"}),"Reset Filters"]})]}),s.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Estimated Export:"}),s.jsx("br",{}),Q," records",s.jsx("br",{}),"Format: ",$.format.toUpperCase()]})})]})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Stats"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-gray-600",children:"Total Members:"}),s.jsx("span",{className:"font-medium",children:B.total_members})]}),Object.entries(B.by_status).slice(0,3).map(([e,a])=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[e,":"]}),s.jsx("span",{className:"font-medium",children:a})]},e))]})]})})]})]}),Y&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 max-w-6xl shadow-lg rounded-md bg-white",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Data Preview (",P.showing," of ",P.total," records)"]}),s.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(l,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"max-h-96 overflow-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Age"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gender"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Church"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Group"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.full_name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.age||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.gender}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.local_church}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.church_group}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.membership_status})]},e.id))})]})}),s.jsx("div",{className:"mt-4 flex justify-end",children:s.jsx("button",{onClick:()=>O(!1),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded",children:"Close"})})]})})]})})]})}export{_ as default};
