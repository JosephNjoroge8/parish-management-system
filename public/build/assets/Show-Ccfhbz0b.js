import{j as e}from"./app-BChuVOCF.js";import{a as s,r as t,H as r,L as a,b as l}from"./inertia-CDxxuqzl.js";import{A as i}from"./AuthenticatedLayout-lcZqL3KY.js";import{C as n}from"./check-3tLCzJkn.js";import{C as d}from"./circle-alert-kZMDiUKQ.js";import{I as c}from"./info-CfnJ1rVU.js";import{L as m}from"./lock-D1svnGsR.js";import{U as x,a as o,C as h,D as g,S as u,H as p}from"./users-CFzd3P2d.js";import{U as j}from"./user-C2Opugs6.js";import{U as b}from"./user-check-blNsQ-Pc.js";import{U as N}from"./user-x-CSqt5B6-.js";import{E as f}from"./eye-D3DGsFQy.js";import{S as y}from"./square-pen-Cr9Xuh01.js";import{A as v}from"./arrow-left-CIT1mRxv.js";import{T as w}from"./trash-2-CUffOIhN.js";import{C as k}from"./crown-yMkMIXM_.js";import{A}from"./award-6OKt_DT5.js";import{S as C}from"./x-CTmJfQPG.js";import{F as L}from"./file-text-ARosyyTD.js";import{D as _}from"./database-BKs6pQeq.js";import{A as U}from"./activity-Do-duXxG.js";import"./vendor--zLKLCTa.js";import"./app-BTIiuZaC.js";import"./transition-tl5wXdCp.js";const W=e=>{switch(e.toLowerCase()){case"members":return"bg-blue-50 border-blue-200 text-blue-800";case"families":return"bg-green-50 border-green-200 text-green-800";case"users":return"bg-purple-50 border-purple-200 text-purple-800";case"sacraments":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"tithes":return"bg-emerald-50 border-emerald-200 text-emerald-800";case"activities":return"bg-orange-50 border-orange-200 text-orange-800";case"groups":return"bg-pink-50 border-pink-200 text-pink-800";case"reports":return"bg-indigo-50 border-indigo-200 text-indigo-800";case"settings":default:return"bg-gray-50 border-gray-200 text-gray-800";case"dashboard":return"bg-teal-50 border-teal-200 text-teal-800"}},D=e=>{const s=e.toLowerCase();return s.includes("super")?"bg-purple-100 text-purple-800 border-purple-200":s.includes("admin")?"bg-red-100 text-red-800 border-red-200":s.includes("manager")?"bg-blue-100 text-blue-800 border-blue-200":s.includes("staff")||s.includes("secretary")?"bg-green-100 text-green-800 border-green-200":s.includes("treasurer")?"bg-yellow-100 text-yellow-800 border-yellow-200":"bg-gray-100 text-gray-800 border-gray-200"},R=e=>e.startsWith("manage")||e.startsWith("create")||e.startsWith("edit")||e.startsWith("delete")?"write":e.startsWith("view")||e.startsWith("access")?"read":e.startsWith("export")?"export":"other",S=e=>{switch(e){case"write":return"bg-red-100 text-red-800 border-red-200";case"read":return"bg-blue-100 text-blue-800 border-blue-200";case"export":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};function $({role:$}){const{flash:O}=s().props,[E,T]=t.useState("overview"),I=(e=>{const s=e.toLowerCase();return s.includes("super")||s.includes("admin")?k:s.includes("manager")||s.includes("admin")?A:s.includes("staff")||s.includes("secretary")?o:s.includes("treasurer")?C:j})($.name),P=(e=>{const s=e.toLowerCase();return s.includes("super")?5:s.includes("admin")?4:s.includes("manager")?3:s.includes("staff")||s.includes("secretary")||s.includes("treasurer")?2:1})($.name),H=$.permissions.reduce((e,s)=>{const t=s.split(" ")[1]||"other";return e[t]||(e[t]=[]),e[t].push(s),e},{}),q={total:$.permissions.length,readOnly:$.permissions.filter(e=>"read"===R(e)).length,writeAccess:$.permissions.filter(e=>"write"===R(e)).length,exportAccess:$.permissions.filter(e=>"export"===R(e)).length};return e.jsxs(i,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(a,{href:route("admin.roles.index"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-gray-100",children:e.jsx(I,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"font-semibold text-xl text-gray-800 leading-tight flex items-center",children:[$.display_name,e.jsxs("span",{className:`ml-3 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${D($.name)}`,children:["Level ",P]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[$.permissions.length," permissions • ",$.users.length," users • Created ",new Date($.created_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(a,{href:route("admin.roles.edit",$.id),className:"inline-flex items-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Edit Role"]}),"super-admin"!==$.name&&e.jsxs("button",{onClick:()=>{$.users.length>0?alert(`Cannot delete role "${$.display_name}" because it has ${$.users.length} assigned users.`):confirm(`Are you sure you want to delete the role "${$.display_name}"? This action cannot be undone.`)&&l.delete(route("admin.roles.destroy",$.id))},className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),children:[e.jsx(r,{title:`Role: ${$.display_name}`}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[(null==O?void 0:O.success)&&e.jsxs("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg flex items-center",children:[e.jsx(n,{className:"w-5 h-5 mr-2"}),O.success]}),(null==O?void 0:O.error)&&e.jsxs("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg flex items-center",children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),O.error]}),e.jsx("div",{className:"bg-white shadow-sm rounded-lg mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[e.jsxs("button",{onClick:()=>T("overview"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("overview"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(c,{className:"w-4 h-4 inline mr-2"}),"Overview"]}),e.jsxs("button",{onClick:()=>T("permissions"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("permissions"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(m,{className:"w-4 h-4 inline mr-2"}),"Permissions (",$.permissions.length,")"]}),e.jsxs("button",{onClick:()=>T("users"),className:"py-4 px-1 border-b-2 font-medium text-sm "+("users"===E?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.jsx(x,{className:"w-4 h-4 inline mr-2"}),"Users (",$.users.length,")"]})]})})}),"overview"===E&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Role Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Role Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono bg-gray-50 px-3 py-2 rounded",children:$.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Display Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$.display_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Clearance Level"}),e.jsx("p",{className:"mt-1",children:e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${D($.name)}`,children:["Level ",P]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created At"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date($.created_at).toLocaleString()})]})]}),$.description&&e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:$.description})]})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Statistics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Total Permissions"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:q.total})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Read Access"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:q.readOnly})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Write Access"}),e.jsx("span",{className:"text-lg font-bold text-red-600",children:q.writeAccess})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Export Access"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:q.exportAccess})]}),e.jsx("hr",{className:"my-4"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Assigned Users"}),e.jsx("span",{className:"text-lg font-bold text-purple-600",children:$.users.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active Users"}),e.jsx("span",{className:"text-lg font-bold text-green-600",children:$.users.filter(e=>e.is_active).length})]})]})]})})]}),"permissions"===E&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Role Permissions"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-50 p-2 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600",children:q.readOnly}),e.jsx("div",{className:"text-xs text-blue-800",children:"Read"})]}),e.jsxs("div",{className:"bg-red-50 p-2 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-red-600",children:q.writeAccess}),e.jsx("div",{className:"text-xs text-red-800",children:"Write"})]}),e.jsxs("div",{className:"bg-green-50 p-2 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:q.exportAccess}),e.jsx("div",{className:"text-xs text-green-800",children:"Export"})]}),e.jsxs("div",{className:"bg-gray-50 p-2 rounded",children:[e.jsx("div",{className:"text-lg font-bold text-gray-600",children:q.total}),e.jsx("div",{className:"text-xs text-gray-800",children:"Total"})]})]})]}),0===Object.keys(H).length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No permissions assigned"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This role has no permissions assigned to it."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(H).map(([s,t])=>{const r=(e=>{switch(e.toLowerCase()){case"members":case"groups":return x;case"families":return p;case"users":return b;case"sacraments":return u;case"tithes":return g;case"activities":return U;case"reports":return h;case"settings":return C;case"dashboard":return _;default:return L}})(s);return e.jsx("div",{className:`border border-gray-200 rounded-lg ${W(s)}`,children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(r,{className:"w-5 h-5"}),e.jsx("h4",{className:"font-medium capitalize",children:s}),e.jsxs("span",{className:"text-sm",children:["(",t.length,")"]})]}),e.jsx("div",{className:"space-y-2",children:t.map(s=>{const t=R(s);return e.jsxs("div",{className:"flex items-center justify-between bg-white bg-opacity-50 p-2 rounded",children:[e.jsx("span",{className:"text-sm",children:s}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${S(t)}`,children:t})]},s)})})]})},s)})})]}),"users"===E&&e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Users with this Role"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[$.users.filter(e=>e.is_active).length," of ",$.users.length," users active"]})]}),0===$.users.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(x,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No users assigned"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No users have been assigned to this role yet."}),e.jsx("div",{className:"mt-6",children:e.jsxs(a,{href:route("admin.users.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Create User"]})})]}):e.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.users.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-8 w-8",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(j,{className:"h-4 w-4 text-gray-500"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.is_active?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"Active"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(N,{className:"w-3 h-3 mr-1"}),"Inactive"]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[e.jsx(a,{href:route("admin.users.show",s.id),className:"text-blue-600 hover:text-blue-900",children:e.jsx(f,{className:"w-4 h-4 inline"})}),e.jsx(a,{href:route("admin.users.edit",s.id),className:"text-yellow-600 hover:text-yellow-900",children:e.jsx(y,{className:"w-4 h-4 inline"})}),e.jsx("button",{onClick:()=>{return e=s.id,void(confirm("Are you sure you want to toggle this user's status?")&&l.patch(route("admin.users.toggle-status",e)));var e},className:""+(s.is_active?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"),children:s.is_active?e.jsx(N,{className:"w-4 h-4 inline"}):e.jsx(b,{className:"w-4 h-4 inline"})})]})]},s.id))})]})})]})]})})]})}export{$ as default};
