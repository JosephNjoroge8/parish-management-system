import{c as e,j as s}from"./app-BChuVOCF.js";import{r as t,H as r,L as a,b as l}from"./inertia-CDxxuqzl.js";import{A as i}from"./AuthenticatedLayout-lcZqL3KY.js";import{D as n,U as d}from"./users-CFzd3P2d.js";import{C as c}from"./calendar-C5Pn9FBq.js";import{T as o}from"./trending-up-DnJbu2Ja.js";import{S as m}from"./search-DWnGfG-o.js";import{E as x}from"./eye-D3DGsFQy.js";import{S as h}from"./square-pen-Cr9Xuh01.js";import{T as u}from"./trash-2-CUffOIhN.js";import{C as p}from"./credit-card-BIcWPPeF.js";import{P as g}from"./plus-vNb5h4rf.js";import"./vendor--zLKLCTa.js";import"./app-BTIiuZaC.js";import"./transition-tl5wXdCp.js";import"./x-CTmJfQPG.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=e("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),j={cash:"Cash",cheque:"Cheque",bank_transfer:"Bank Transfer",mobile_money:"Mobile Money",card:"Card"},y={tithe:"Tithe",offering:"Offering",thanksgiving:"Thanksgiving",project:"Project Contribution",special:"Special Offering"},b={cash:"text-green-600 bg-green-100",cheque:"text-blue-600 bg-blue-100",bank_transfer:"text-purple-600 bg-purple-100",mobile_money:"text-orange-600 bg-orange-100",card:"text-indigo-600 bg-indigo-100"},v={tithe:"text-emerald-600 bg-emerald-100",offering:"text-blue-600 bg-blue-100",thanksgiving:"text-yellow-600 bg-yellow-100",project:"text-purple-600 bg-purple-100",special:"text-pink-600 bg-pink-100"};function N({auth:e,tithing:N,filters:w,statistics:_}){var k,S,A,C,T,M,$,D,E,O;const[R,F]=t.useState(w.search||""),[P,q]=t.useState(w.payment_method||""),[L,I]=t.useState(w.offering_type||""),[z,B]=t.useState(w.month||""),[H,J]=t.useState(w.year||""),[K,V]=t.useState(null),Y=_||{total_amount:0,this_month:0,this_year:0,total_records:0,by_type:{}},G=(null==(S=null==(k=null==e?void 0:e.user)?void 0:k.permissions)?void 0:S.can_edit_tithing)??!0,U=(null==(C=null==(A=null==e?void 0:e.user)?void 0:A.permissions)?void 0:C.can_delete_tithing)??!0,Z=(null==(M=null==(T=null==e?void 0:e.user)?void 0:T.permissions)?void 0:M.can_view_tithing)??!0,Q=(null==(D=null==($=null==e?void 0:e.user)?void 0:$.permissions)?void 0:D.can_view_financial_reports)??!0,W=t.useMemo(()=>{const e=new Set;return N.data.forEach(s=>{e.add(new Date(s.payment_date).getFullYear().toString())}),Array.from(e).sort((e,s)=>parseInt(s)-parseInt(e))},[N.data]),X=()=>{l.get(route("tithes.index"),{search:R,payment_method:P,offering_type:L,month:z,year:H},{preserveState:!0,replace:!0})},ee=e=>{confirm(`Are you sure you want to delete this ${y[e.offering_type]} record for ${e.member.first_name} ${e.member.last_name}? This action cannot be undone.`)&&(V(e.id),l.delete(route("tithes.destroy",e.id),{onFinish:()=>V(null),onError:()=>{V(null),alert("Failed to delete tithing record. Please try again.")}}))},se=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e);return s.jsxs(i,{header:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Tithing & Offerings"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage tithes, offerings, and financial contributions"})]}),s.jsxs("div",{className:"flex space-x-3",children:[Q&&s.jsxs(a,{href:route("reports.financial"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{children:"Reports"})]}),G&&s.jsxs(a,{href:route("tithes.create"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(g,{className:"w-4 h-4"}),s.jsx("span",{children:"Add Record"})]})]})]}),children:[s.jsx(r,{title:"Tithing & Offerings"}),s.jsx("div",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(n,{className:"h-8 w-8 text-green-600"})}),s.jsx("div",{className:"ml-3 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Amount"}),s.jsx("dd",{className:"text-lg font-medium text-gray-900",children:se(Y.total_amount)})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(c,{className:"h-8 w-8 text-blue-600"})}),s.jsx("div",{className:"ml-3 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"This Month"}),s.jsx("dd",{className:"text-lg font-medium text-gray-900",children:se(Y.this_month)})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-purple-600"})}),s.jsx("div",{className:"ml-3 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"This Year"}),s.jsx("dd",{className:"text-lg font-medium text-gray-900",children:se(Y.this_year)})]})})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(d,{className:"h-8 w-8 text-orange-600"})}),s.jsx("div",{className:"ml-3 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Records"}),s.jsx("dd",{className:"text-lg font-medium text-gray-900",children:Y.total_records})]})})]})})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:Object.entries(y).map(([e,t])=>{const r=Y.by_type[e]||0,a=v[e];return s.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:`mx-auto w-8 h-8 rounded-full ${a.split(" ")[1]} flex items-center justify-center mb-2`,children:s.jsx(n,{className:`w-4 h-4 ${a.split(" ")[0]}`})}),s.jsx("dt",{className:"text-xs font-medium text-gray-500 truncate",children:t}),s.jsx("dd",{className:"text-sm font-medium text-gray-900",children:se(r)})]})},e)})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 gap-4",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Search by member name, reference number...",value:R,onChange:e=>F(e.target.value),onKeyPress:e=>{"Enter"===e.key&&X()},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),s.jsxs("select",{value:L,onChange:e=>I(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Types"}),Object.entries(y).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),s.jsxs("select",{value:P,onChange:e=>q(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Methods"}),Object.entries(j).map(([e,t])=>s.jsx("option",{value:e,children:t},e))]}),s.jsxs("select",{value:z,onChange:e=>B(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Months"}),[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]}),s.jsxs("select",{value:H,onChange:e=>J(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"All Years"}),W.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[s.jsxs("button",{onClick:X,className:"bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx("span",{children:"Search"})]}),s.jsx("button",{onClick:()=>{F(""),q(""),I(""),B(""),J(""),l.get(route("tithes.index"),{},{preserveState:!0,replace:!0})},className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Clear"})]})]}),N.data.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-md overflow-hidden mb-6",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Date"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Received By"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.data.map(e=>{const t=v[e.offering_type],r=b[e.payment_method];return s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[e.member.first_name," ",e.member.last_name]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["#",e.member.member_number]})]})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t}`,children:y[e.offering_type]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:se(e.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(c,{className:"w-4 h-4 text-gray-400 mr-1"}),new Date(e.payment_date).toLocaleDateString()]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r}`,children:j[e.payment_method]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.reference_number||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.received_by}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[Z&&s.jsx(a,{href:route("tithes.show",e.id),className:"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-50 transition-colors",title:"View Details",children:s.jsx(x,{className:"w-4 h-4"})}),G&&s.jsx(a,{href:route("tithes.edit",e.id),className:"text-yellow-600 hover:text-yellow-800 p-2 rounded hover:bg-yellow-50 transition-colors",title:"Edit",children:s.jsx(h,{className:"w-4 h-4"})}),U&&s.jsx("button",{onClick:()=>ee(e),disabled:K===e.id,className:"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-50 transition-colors disabled:opacity-50",title:"Delete",children:s.jsx(u,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),s.jsx("div",{className:"lg:hidden grid grid-cols-1 gap-4 mb-6",children:N.data.map(e=>{const t=v[e.offering_type],r=b[e.payment_method];return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[e.member.first_name," ",e.member.last_name]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["#",e.member.member_number]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-bold text-green-600",children:se(e.amount)}),s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t}`,children:y[e.offering_type]})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(c,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{children:new Date(e.payment_date).toLocaleDateString()})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(p,{className:"w-4 h-4 mr-2 flex-shrink-0"}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${r}`,children:j[e.payment_method]})]}),e.reference_number&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium mr-2",children:"Reference:"}),s.jsx("span",{children:e.reference_number})]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium mr-2",children:"Received by:"}),s.jsx("span",{children:e.received_by})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[Z&&s.jsx(a,{href:route("tithes.show",e.id),className:"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-50 transition-colors",title:"View Details",children:s.jsx(x,{className:"w-4 h-4"})}),G&&s.jsx(a,{href:route("tithes.edit",e.id),className:"text-yellow-600 hover:text-yellow-800 p-2 rounded hover:bg-yellow-50 transition-colors",title:"Edit",children:s.jsx(h,{className:"w-4 h-4"})}),U&&s.jsx("button",{onClick:()=>ee(e),disabled:K===e.id,className:"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-50 transition-colors disabled:opacity-50",title:"Delete",children:s.jsx(u,{className:"w-4 h-4"})})]})]},e.id)})}),N.last_page>1&&s.jsxs("div",{className:"flex items-center justify-between bg-white px-4 py-3 border-t border-gray-200 sm:px-6 rounded-lg shadow",children:[s.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[(null==(E=N.links[0])?void 0:E.url)&&s.jsx(a,{href:N.links[0].url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(null==(O=N.links[N.links.length-1])?void 0:O.url)&&s.jsx(a,{href:N.links[N.links.length-1].url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),s.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[s.jsx("div",{children:s.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:N.from})," to"," ",s.jsx("span",{className:"font-medium",children:N.to})," of"," ",s.jsx("span",{className:"font-medium",children:N.total})," results"]})}),s.jsx("div",{children:s.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:N.links.map((e,t)=>s.jsx(a,{href:e.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${e.active?"z-10 bg-green-50 border-green-500 text-green-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${0===t?"rounded-l-md":""} ${t===N.links.length-1?"rounded-r-md":""} ${e.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:e.label}},t))})})]})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[s.jsx(n,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tithing records found"}),s.jsx("p",{className:"text-gray-600 mb-4",children:R||P||L||z||H?"Try adjusting your search criteria.":"Get started by adding your first tithing record."}),G&&!R&&!P&&!L&&!z&&!H&&s.jsxs(a,{href:route("tithes.create"),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg inline-flex items-center space-x-2 transition-colors",children:[s.jsx(g,{className:"w-4 h-4"}),s.jsx("span",{children:"Add First Record"})]})]})]})})]})}export{N as default};
