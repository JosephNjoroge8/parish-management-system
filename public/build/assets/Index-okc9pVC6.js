import{c as e,j as s,X as t,I as r}from"./app-CE4iXgnb.js";import{r as a,u as l,b as i,H as n,L as c}from"./inertia-CDxxuqzl.js";import{A as d}from"./AuthenticatedLayout-CAzOOrEZ.js";import{U as o}from"./users-Dbj6gQ98.js";import{U as m}from"./user-check-CjWcb1nA.js";import{C as x}from"./calendar-jJpZne5F.js";import{M as h}from"./map-pin-D9Ua4C3X.js";import{U as u}from"./user-plus-D75hMPXL.js";import{S as b}from"./search-DsORygC6.js";import{L as g}from"./loader-circle-ByBbcD6p.js";import{F as p}from"./funnel-CdFLKB9r.js";import{D as f}from"./download-D3HUmGeS.js";import{F as j}from"./file-spreadsheet-D0fTGdqf.js";import{F as v}from"./file-text-j-URzPkl.js";import{U as y}from"./upload-fXPbDdoA.js";import{T as N}from"./trash-2-DKnT_7c8.js";import{P as w}from"./phone-B6VxcByF.js";import{M as _}from"./mail-Dnz-yILG.js";import{E as k}from"./eye-CYms5AqN.js";import{S as C}from"./square-pen-DXFpwGqU.js";import{P as S}from"./plus-BNX_hsqU.js";import{C as E}from"./chevron-right-DgU7yKZu.js";import{C as M}from"./circle-alert-CAyIN-rJ.js";import{R as L}from"./refresh-cw-DKrALaeP.js";import"./vendor--zLKLCTa.js";import"./app-BHp0F1kE.js";import"./transition-tl5wXdCp.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=e("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),A=e("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),R=e("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);function O({auth:e,members:O,stats:T,filters:$={},filterOptions:D,flash:I}){var q,U,P,X,G;const[H,W]=a.useState([]),[z,V]=a.useState(!1),[Y,K]=a.useState(!1),[J,Q]=a.useState(!1),[B,Z]=a.useState(null),[ee,se]=a.useState(!1),[te,re]=a.useState(!1),[ae,le]=a.useState(0),[ie,ne]=a.useState(!1),[ce,de]=a.useState(null),[oe,me]=a.useState($.search||"");a.useEffect(()=>{(null==I?void 0:I.success)&&window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"success",message:I.success}})),(null==I?void 0:I.error)&&window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"error",message:I.error}}))},[I]);const{data:xe,setData:he,get:ue,processing:be}=l({search:$.search||"",local_church:$.local_church||"",church_group:$.church_group||"",membership_status:$.membership_status||"",gender:$.gender||"",age_group:$.age_group||"",sort:$.sort||"last_name",direction:$.direction||"asc",per_page:$.per_page||15}),ge=a.useMemo(()=>(null==O?void 0:O.data)||[],[null==O?void 0:O.data]),pe=a.useMemo(()=>(null==O?void 0:O.current_page)||1,[null==O?void 0:O.current_page]),fe=a.useMemo(()=>(null==O?void 0:O.last_page)||1,[null==O?void 0:O.last_page]),je=a.useMemo(()=>(null==O?void 0:O.total)||0,[null==O?void 0:O.total]),ve=a.useMemo(()=>(null==O?void 0:O.from)||0,[null==O?void 0:O.from]),ye=a.useMemo(()=>(null==O?void 0:O.to)||0,[null==O?void 0:O.to]),Ne=a.useMemo(()=>{var e,s,t,r,a,l,i,n,c,d,o,m,x,h,u,b,g,p,f,j,v,y,N,w;const _=T||{};return{total_members:_.total_members||0,active_members:_.active_members||(null==(e=_.by_status)?void 0:e.active)||0,new_this_month:_.new_this_month||0,by_church:_.by_church||{},by_group:_.by_group||{},by_status:{active:(null==(s=_.by_status)?void 0:s.active)||0,inactive:(null==(t=_.by_status)?void 0:t.inactive)||0,transferred:(null==(r=_.by_status)?void 0:r.transferred)||0,deceased:(null==(a=_.by_status)?void 0:a.deceased)||0,..._.by_status},by_gender:_.by_gender||{},statistics:{total_members:(null==(l=_.statistics)?void 0:l.total_members)||_.total_members||0,active_members:(null==(i=_.statistics)?void 0:i.active_members)||_.active_members||(null==(n=_.by_status)?void 0:n.active)||0,inactive_members:(null==(c=_.statistics)?void 0:c.inactive_members)||(null==(d=_.by_status)?void 0:d.inactive)||0,transferred_members:(null==(o=_.statistics)?void 0:o.transferred_members)||(null==(m=_.by_status)?void 0:m.transferred)||0,deceased_members:(null==(x=_.statistics)?void 0:x.deceased_members)||(null==(h=_.by_status)?void 0:h.deceased)||0,active_percentage:(null==(u=_.statistics)?void 0:u.active_percentage)||0,new_this_month:(null==(b=_.statistics)?void 0:b.new_this_month)||_.new_this_month||0,male_members:(null==(g=_.statistics)?void 0:g.male_members)||(null==(p=_.by_gender)?void 0:p.MALE)||(null==(f=_.by_gender)?void 0:f.male)||(null==(j=_.by_gender)?void 0:j.Male)||0,female_members:(null==(v=_.statistics)?void 0:v.female_members)||(null==(y=_.by_gender)?void 0:y.FEMALE)||(null==(N=_.by_gender)?void 0:N.female)||(null==(w=_.by_gender)?void 0:w.Female)||0,..._.statistics}}},[T]),we=a.useMemo(()=>({local_churches:(null==D?void 0:D.local_churches)||[],church_groups:(null==D?void 0:D.church_groups)||[],membership_statuses:(null==D?void 0:D.membership_statuses)||[],genders:(null==D?void 0:D.genders)||[],age_groups:(null==D?void 0:D.age_groups)||[]}),[D]),_e=a.useCallback(function(e,s){let t;return(...r)=>{clearTimeout(t),t=setTimeout(()=>e(...r),s)}}(e=>{he("search",e),K(!0),ue(route("members.index"),{preserveScroll:!0,only:["members","stats"],onFinish:()=>K(!1)})},500),[he,ue]),ke=a.useCallback(e=>{me(e),_e(e)},[_e]),Ce=a.useCallback(e=>{e.preventDefault(),he("search",oe),K(!0),ue(route("members.index"),{preserveState:!0,onFinish:()=>K(!1)})},[oe,he,ue]),Se=a.useCallback((e,s)=>{he(e,s),K(!0),ue(route("members.index"),{preserveScroll:!0,only:["members","stats"],onFinish:()=>K(!1)})},[he,ue]),Ee=a.useCallback(e=>{const s=xe.sort===e&&"asc"===xe.direction?"desc":"asc";he({...xe,sort:e,direction:s}),K(!0),ue(route("members.index"),{preserveState:!0,onFinish:()=>K(!1)})},[xe,he,ue]),Me=a.useCallback(e=>{e>=1&&e<=fe&&(K(!0),ue(route("members.index",{...xe,page:e}),{onFinish:()=>K(!1)}))},[xe,fe,ue]),Le=a.useCallback(e=>{W(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},[]),Fe=a.useCallback(()=>{H.length===ge.length&&ge.length>0?W([]):W(ge.map(e=>e.id))},[H.length,ge]),Ae=a.useCallback(()=>{me(""),he({search:"",local_church:"",church_group:"",membership_status:"",gender:"",age_group:"",sort:"last_name",direction:"asc",per_page:15}),K(!0),ue(route("members.index"),{preserveState:!0,onFinish:()=>K(!1)})},[he,ue]),Re=a.useCallback(async e=>{re(!0);try{const s={format:e,search:(null==$?void 0:$.search)||"",local_church:(null==$?void 0:$.local_church)||"",church_group:(null==$?void 0:$.church_group)||"",membership_status:(null==$?void 0:$.membership_status)||"",gender:(null==$?void 0:$.gender)||"",age_group:(null==$?void 0:$.age_group)||"",sort_by:(null==$?void 0:$.sort)||"last_name",sort_direction:(null==$?void 0:$.direction)||"asc",selected_members:H.join(",")},t=Object.entries(s).map(([e,s])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(s))}`).join("&"),r=await fetch(`/members/export?${t}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/octet-stream"}});if(!r.ok){await r.text();throw new Error("Export failed")}{const s=await r.blob(),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`members_export_${(new Date).toISOString().split("T")[0]}.${e}`,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}}catch(s){alert("Export failed. Please try again.")}finally{re(!1)}},[$,H]),Oe=a.useCallback(async()=>{var e;if(!B)return;se(!0),le(0);const s=new FormData;s.append("file",B);try{const t=await fetch(route("members.import"),{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":(null==(e=document.querySelector('meta[name="csrf-token"]'))?void 0:e.getAttribute("content"))||""}}),r=await t.json();if(!t.ok)throw new Error(r.message||"Import failed");le(100),setTimeout(()=>{Q(!1),Z(null),le(0),Pe(),window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"success",message:`Successfully imported ${r.imported||0} members!`}}))},1e3)}catch(t){window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"error",message:t instanceof Error?t.message:"Import failed. Please try again."}}))}finally{se(!1)}},[B]),Te=a.useCallback(async(e,s)=>{var t;ge.map(t=>t.id===e?{...t,membership_status:s}:t);try{const r=await fetch(route("members.update-status",e),{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":(null==(t=document.querySelector('meta[name="csrf-token"]'))?void 0:t.getAttribute("content"))||"","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({membership_status:s})}),a=await r.json();if(!a.success)throw new Error(a.message||"Failed to update status");window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"success",message:a.message}})),i.reload({only:["members","stats"],onSuccess:()=>{$e()}})}catch(r){window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"error",message:r instanceof Error?r.message:"Failed to update member status"}})),i.reload({only:["members","stats"]})}},[ge]),$e=a.useCallback(async()=>{try{const e=await fetch(route("members.stats.live"),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});(await e.json()).success&&i.reload({only:["stats"]})}catch(e){}},[]);a.useEffect(()=>{const e=setInterval($e,3e4);return()=>clearInterval(e)},[$e]);const De=a.useCallback(e=>{i.delete(route("members.destroy",e.id),{onSuccess:()=>{ne(!1),de(null),window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"success",message:"Member deleted successfully!"}}))},onError:()=>{window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"error",message:"Failed to delete member. Please try again."}}))}})},[]),Ie=a.useCallback(()=>{0!==H.length&&confirm(`Are you sure you want to delete ${H.length} selected members?`)&&i.post(route("members.bulk-delete"),{member_ids:H},{onSuccess:()=>{W([]),window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"success",message:`Successfully deleted ${H.length} members!`}}))},onError:()=>{window.dispatchEvent(new CustomEvent("flash-message",{detail:{type:"error",message:"Failed to delete selected members. Please try again."}}))}})},[H]),qe=a.useCallback(e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"inactive":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"transferred":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},[]),Ue=a.useCallback(e=>{switch(e){case"PMC":return"bg-purple-100 text-purple-800 border-purple-200";case"Youth":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"Young Parents":return"bg-pink-100 text-pink-800 border-pink-200";case"C.W.A":return"bg-rose-100 text-rose-800 border-rose-200";case"CMA":return"bg-orange-100 text-orange-800 border-orange-200";case"Choir":return"bg-teal-100 text-teal-800 border-teal-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},[]),Pe=a.useCallback(()=>{K(!0),i.reload({onFinish:()=>K(!1)})},[]),Xe=a.useCallback(async()=>{try{const e=await fetch(route("members.import-template"),{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});if(e.ok){const s=await e.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="members_import_template.csv",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}}catch(e){}},[]);return s.jsxs(d,{header:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Parish Members"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Manage and view all parish members (",je.toLocaleString()," total)"]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:$e,className:"inline-flex items-center px-3 py-2 border border-green-300 rounded-lg text-sm font-medium text-green-700 bg-green-50 hover:bg-green-100 transition-colors",title:"Refresh Statistics",children:[s.jsx(L,{className:"w-4 h-4 mr-2"}),"Refresh Stats"]}),s.jsxs("button",{onClick:Pe,disabled:Y,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors",children:[s.jsx(L,{className:"w-4 h-4 mr-2 "+(Y?"animate-spin":"")}),"Refresh Data"]}),s.jsxs(c,{href:route("members.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition-colors",children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"Add Member"]})]})]}),children:[s.jsx(n,{title:"Members"}),s.jsx("div",{className:"py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-blue-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Members"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:Ne.total_members.toLocaleString()})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(m,{className:"h-8 w-8 text-green-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Members"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:((null==(q=Ne.by_status)?void 0:q.active)||Ne.active_members||0).toLocaleString()}),s.jsx("dd",{className:"text-xs text-green-600 font-medium",children:Ne.total_members>0?`${Math.round(((null==(U=Ne.by_status)?void 0:U.active)||Ne.active_members||0)/Ne.total_members*100)}% active`:"0% active"})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-yellow-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Inactive Members"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:((null==(P=Ne.by_status)?void 0:P.inactive)||0).toLocaleString()})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-blue-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Transferred"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:((null==(X=Ne.by_status)?void 0:X.transferred)||0).toLocaleString()})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-gray-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Deceased"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:((null==(G=Ne.by_status)?void 0:G.deceased)||0).toLocaleString()})]})})]})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[s.jsx(x,{className:"h-5 w-5 text-orange-600 mr-2"}),"Church Groups (",Object.keys(Ne.by_group).length,")"]}),s.jsx("div",{className:"space-y-3",children:Object.entries(Ne.by_group).sort(([,e],[,s])=>s-e).map(([e,t])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full border ${Ue(e)}`,children:e})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.toLocaleString()}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:(Ne.total_members>0?t/Ne.total_members*100:0)+"%"}})})]})]},e))})]})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[s.jsx(h,{className:"h-5 w-5 text-indigo-600 mr-2"}),"Local Churches (",Object.keys(Ne.by_church).length,")"]}),s.jsx("div",{className:"space-y-3",children:Object.entries(Ne.by_church).sort(([,e],[,s])=>s-e).map(([e,t])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:"text-sm text-gray-700 truncate max-w-[200px]",title:e,children:e})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.toLocaleString()}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:(Ne.total_members>0?t/Ne.total_members*100:0)+"%"}})})]})]},e))})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(u,{className:"h-8 w-8 text-purple-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"New This Month"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:Ne.new_this_month.toLocaleString()})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(x,{className:"h-8 w-8 text-orange-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Church Groups"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:Object.keys(Ne.by_group).length}),s.jsx("dd",{className:"text-xs text-orange-600 font-medium",children:"Active groups"})]})})]})})}),s.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(o,{className:"h-8 w-8 text-indigo-600"})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Churches"}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:Object.keys(Ne.by_church).length}),s.jsx("dd",{className:"text-xs text-indigo-600 font-medium",children:"Local churches"})]})})]})})})]}),s.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[s.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[s.jsx("div",{className:"flex-1 max-w-lg",children:s.jsxs("form",{onSubmit:Ce,className:"flex",children:[s.jsxs("div",{className:"relative flex-grow",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx(b,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:oe,onChange:e=>ke(e.target.value),placeholder:"Search by name, phone, email, ID...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500 transition-colors"}),oe&&s.jsx("button",{type:"button",onClick:()=>ke(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx(t,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),s.jsx("button",{type:"submit",disabled:be||Y,className:"px-4 py-2 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:Y?s.jsx(g,{className:"w-4 h-4 animate-spin"}):"Search"})]})}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:()=>V(!z),className:"inline-flex items-center px-3 py-2 border rounded-lg text-sm font-medium transition-colors "+(z?"border-blue-500 text-blue-700 bg-blue-50":"border-gray-300 text-gray-700 bg-white hover:bg-gray-50"),children:[s.jsx(p,{className:"w-4 h-4 mr-2"}),"Filters",Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e)&&s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Active"})]}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{disabled:te,className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 transition-colors",children:[te?s.jsx(g,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(f,{className:"w-4 h-4 mr-2"}),"Export"]}),s.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10",children:s.jsxs("div",{className:"py-1",children:[s.jsxs("button",{onClick:()=>Re("csv"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"Export as CSV"]}),s.jsxs("button",{onClick:()=>Re("excel"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),"Export as Excel"]}),s.jsxs("button",{onClick:()=>Re("pdf"),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[s.jsx(v,{className:"w-4 h-4 mr-2"}),"Export as PDF"]})]})})]}),s.jsxs("button",{onClick:()=>Q(!0),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),"Import"]}),H.length>0&&s.jsxs("button",{onClick:Ie,className:"inline-flex items-center px-3 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-red-50 hover:bg-red-100 transition-colors",children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),"Delete (",H.length,")"]})]})]}),z&&s.jsxs("div",{className:"mt-6 p-4 bg-white rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local Church"}),s.jsxs("select",{value:xe.local_church,onChange:e=>Se("local_church",e.target.value),className:"w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"All Churches"}),we.local_churches.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Church Group"}),s.jsxs("select",{value:xe.church_group,onChange:e=>Se("church_group",e.target.value),className:"w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"All Groups"}),we.church_groups.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Membership Status"}),s.jsxs("select",{value:xe.membership_status,onChange:e=>Se("membership_status",e.target.value),className:"w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"All Statuses"}),we.membership_statuses.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),s.jsxs("select",{value:xe.gender,onChange:e=>Se("gender",e.target.value),className:"w-full border-gray-300 rounded-lg text-sm focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[s.jsx("option",{value:"",children:"All Genders"}),we.genders.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]})]}),s.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[s.jsx("div",{className:"text-sm text-gray-500",children:Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e)&&"Filters applied - showing filtered results"}),s.jsx("button",{onClick:Ae,className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"Clear All Filters"})]})]})]}),(oe||Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e))&&s.jsx("div",{className:"px-6 py-3 bg-blue-50 border-b border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-sm text-blue-700",children:[s.jsx(r,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{children:[oe&&`Searching for "${oe}" • `,"Showing ",ve.toLocaleString()," to ",ye.toLocaleString()," of ",je.toLocaleString()," results"]})]}),H.length>0&&s.jsxs("span",{className:"text-sm text-blue-600 font-medium",children:[H.length," selected"]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left",children:s.jsx("input",{type:"checkbox",checked:H.length===ge.length&&ge.length>0,onChange:Fe,className:"rounded border-gray-300 focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>Ee("last_name"),children:s.jsxs("div",{className:"flex items-center",children:["Name","last_name"===xe.sort&&s.jsx("span",{className:"ml-1",children:"asc"===xe.direction?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact & Location"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Church Info"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>Ee("membership_date"),children:s.jsxs("div",{className:"flex items-center",children:["Membership","membership_date"===xe.sort&&s.jsx("span",{className:"ml-1",children:"asc"===xe.direction?"↑":"↓"})]})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ge.length>0?ge.map(e=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsx("input",{type:"checkbox",checked:H.includes(e.id),onChange:()=>Le(e.id),className:"rounded border-gray-300 focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.full_name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Age: ",e.age," • ",e.gender,e.id_number&&s.jsxs("span",{className:"ml-2",children:["ID: ",e.id_number]})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-1",children:[e.phone&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(w,{className:"w-3 h-3 mr-1 flex-shrink-0"}),s.jsx("a",{href:`tel:${e.phone}`,className:"hover:text-blue-600 transition-colors",children:e.phone})]}),e.email&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(_,{className:"w-3 h-3 mr-1 flex-shrink-0"}),s.jsx("a",{href:`mailto:${e.email}`,className:"hover:text-blue-600 transition-colors",children:e.email})]}),e.residence&&s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx(h,{className:"w-3 h-3 mr-1 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.residence})]})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(h,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.local_church]}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full border ${Ue(e.church_group)}`,children:e.church_group})]})}),s.jsxs("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm text-gray-900",children:new Date(e.membership_date).toLocaleDateString()}),e.family&&s.jsxs("div",{className:"text-sm text-gray-500",children:["Family: ",e.family.family_name]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs rounded-full border ${qe(e.membership_status)}`,children:e.membership_status})}),s.jsx("td",{className:"px-6 py-4 text-right",children:s.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx("div",{className:"relative",children:s.jsxs("select",{value:e.membership_status,onChange:s=>{const t=s.target.value;t!==e.membership_status&&(confirm(`Change ${e.full_name}'s status to ${t}?`)?Te(e.id,t):s.target.value=e.membership_status)},className:"text-xs px-3 py-2 rounded-lg border-2 font-medium transition-all duration-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer hover:shadow-md "+("active"===e.membership_status?"border-green-300 bg-green-50 text-green-700":"inactive"===e.membership_status?"border-yellow-300 bg-yellow-50 text-yellow-700":"transferred"===e.membership_status?"border-blue-300 bg-blue-50 text-blue-700":"border-gray-300 bg-gray-50 text-gray-700"),title:`Current status: ${e.membership_status}. Click to change.`,children:[s.jsx("option",{value:"active",children:"✅ Active"}),s.jsx("option",{value:"inactive",children:"⏸️ Inactive"}),s.jsx("option",{value:"transferred",children:"📋 Transferred"}),s.jsx("option",{value:"deceased",children:"🕊️ Deceased"})]})}),s.jsx(c,{href:route("members.show",e.id),className:"text-blue-600 hover:text-blue-900 transition-colors p-2 rounded hover:bg-blue-50",title:"View Member Details",children:s.jsx(k,{className:"w-4 h-4"})}),s.jsx(c,{href:route("members.edit",e.id),className:"text-indigo-600 hover:text-indigo-900 transition-colors p-2 rounded hover:bg-indigo-50",title:"Edit Member Information",children:s.jsx(C,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>{de(e),ne(!0)},className:"text-red-600 hover:text-red-900 transition-colors p-2 rounded hover:bg-red-50",title:"Delete Member",children:s.jsx(N,{className:"w-4 h-4"})})]})})]},e.id)):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:s.jsxs("div",{className:"flex flex-col items-center justify-center",children:[s.jsx(o,{className:"w-16 h-16 text-gray-400 mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:oe||Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e)?"No members found":"No members yet"}),s.jsx("p",{className:"text-sm text-gray-500 mb-6 max-w-sm",children:oe||Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e)?"Try adjusting your search criteria or filters to find different results":"Get started by adding your first parish member to the system"}),!oe&&!Object.values(xe).some(e=>e&&"last_name"!==e&&"asc"!==e&&15!==e)&&s.jsxs(c,{href:route("members.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-lg font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition-colors",children:[s.jsx(S,{className:"w-4 h-4 mr-2"}),"Add Your First Member"]})]})})})})]})}),je>0&&s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-3 sm:space-y-0",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",s.jsx("span",{className:"font-medium",children:ve.toLocaleString()})," to"," ",s.jsx("span",{className:"font-medium",children:ye.toLocaleString()})," of"," ",s.jsx("span",{className:"font-medium",children:je.toLocaleString()})," results"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-700",children:"Show:"}),s.jsxs("select",{value:xe.per_page,onChange:e=>Se("per_page",e.target.value),className:"border-gray-300 rounded text-sm focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"10",children:"10"}),s.jsx("option",{value:"15",children:"15"}),s.jsx("option",{value:"25",children:"25"}),s.jsx("option",{value:"50",children:"50"}),s.jsx("option",{value:"100",children:"100"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>Me(1),disabled:1===pe||Y,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:s.jsx(A,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Me(pe-1),disabled:1===pe||Y,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:s.jsx(F,{className:"w-4 h-4"})}),s.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,fe)},(e,t)=>{let r;return r=fe<=5||pe<=3?t+1:pe>=fe-2?fe-4+t:pe-2+t,s.jsx("button",{onClick:()=>Me(r),disabled:Y,className:`px-3 py-2 text-sm font-medium rounded transition-colors ${r===pe?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100"} disabled:opacity-50 disabled:cursor-not-allowed`,children:r},r)})}),s.jsx("button",{onClick:()=>Me(pe+1),disabled:pe===fe||Y,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:s.jsx(E,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>Me(fe),disabled:pe===fe||Y,className:"p-2 text-gray-500 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:s.jsx(R,{className:"w-4 h-4"})})]})]})})]})]})}),J&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:s.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Import Members"}),s.jsx("button",{onClick:()=>Q(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(t,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select CSV File"}),s.jsx("input",{type:"file",accept:".csv",onChange:e=>{var s;return Z((null==(s=e.target.files)?void 0:s[0])||null)},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 transition-colors"})]}),ae>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Importing..."}),s.jsxs("span",{children:[ae,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${ae}%`}})})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:[s.jsx("p",{className:"mb-2",children:"📋 Import Guidelines:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"File must be in CSV format"}),s.jsx("li",{children:"First row should contain column headers"}),s.jsx("li",{children:"Required fields: first_name, last_name, local_church, church_group"})]})]}),s.jsx("div",{className:"flex items-center space-x-2",children:s.jsx("button",{onClick:Xe,className:"text-sm text-blue-600 hover:text-blue-800 underline transition-colors",children:"Download Template"})})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>Q(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:Oe,disabled:!B||ee,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:ee?s.jsx(g,{className:"w-4 h-4 animate-spin"}):"Import Members"})]})]})})}),ie&&ce&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:s.jsx("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx(M,{className:"w-6 h-6 text-red-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Delete Member"}),s.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone."})]})]}),s.jsxs("p",{className:"text-sm text-gray-700 mb-6",children:["Are you sure you want to delete ",s.jsx("strong",{children:ce.full_name}),"? This will permanently remove all their information from the system."]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>{ne(!1),de(null)},className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:()=>De(ce),className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:"Delete Member"})]})]})})})]})}export{O as default};
