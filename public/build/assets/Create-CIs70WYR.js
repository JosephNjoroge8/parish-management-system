import{c as e,j as a}from"./app-D-87LwF0.js";import{u as r,r as s,H as l,L as i}from"./inertia-CDxxuqzl.js";import{A as t}from"./AuthenticatedLayout-XalLJsaz.js";import{H as d,U as o}from"./users-bxVbXqF1.js";import{P as n}from"./phone-Q7tRXMnn.js";import{S as m}from"./save-DeFa2VX8.js";import{U as c}from"./user-CFZlIneW.js";import{A as h}from"./arrow-left-tRuncKUE.js";import"./vendor--zLKLCTa.js";import"./app-iHDk2OQF.js";import"./transition-tl5wXdCp.js";import"./user-plus-CndCSYvC.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=e("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),u=({id:e,label:r,type:s="text",required:l=!1,placeholder:i="",className:t="",rows:d,value:o,error:n,onChange:m})=>{const c="textarea"===s;return a.jsxs("div",{className:t,children:[a.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-2",children:[r," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),c?a.jsx("textarea",{id:e,value:o,onChange:e=>m(e.target.value),placeholder:i,rows:d||3,"aria-invalid":!!n,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors "+(n?"border-red-500":"border-gray-300"),required:l}):a.jsx("input",{type:s,id:e,value:o,onChange:e=>m(e.target.value),placeholder:i,"aria-invalid":!!n,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors "+(n?"border-red-500":"border-gray-300"),required:l}),n&&a.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:n})]})};function p({auth:e,availableMembers:p=[],success:b,error:f}){const{data:g,setData:y,post:j,processing:v,errors:N,clearErrors:w}=r({family_name:"",family_code:"",address:"",phone:"",email:"",deanery:"",parish:"",parish_section:"",head_of_family_id:""}),k=s.useCallback((e,a)=>{y(e,a),N[e]&&w(e)},[y,N,w]),C=s.useCallback(()=>{var e,a,r,s;if(!(null==(e=g.family_name)?void 0:e.trim()))return null==(a=document.getElementById("family_name"))||a.focus(),!1;if(null==(r=g.email)?void 0:r.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email))return null==(s=document.getElementById("email"))||s.focus(),!1}return!0},[g]),_=s.useCallback(e=>{e.preventDefault(),C()&&(w(),Object.fromEntries(Object.entries(g).map(([e,a])=>[e,(null==a?void 0:a.trim())||null])),j(route("families.store"),{onSuccess:()=>{},onError:e=>{var a;const r=Object.keys(e)[0];r&&(null==(a=document.getElementById(r))||a.focus())}}))},[C,w,j,g]),M=s.useCallback(({id:e,label:r,required:l=!1,placeholder:i="Select an option",className:t="",options:d})=>{const o=s.useCallback(a=>{k(e,a.target.value)},[e]);return a.jsxs("div",{className:t,children:[a.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700 mb-2",children:[r," ",l&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{id:e,value:g[e]||"",onChange:o,"aria-invalid":N[e]?"true":"false",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors "+(N[e]?"border-red-500":"border-gray-300"),required:l,children:[a.jsx("option",{value:"",children:i}),d.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),N[e]&&a.jsx("p",{className:"mt-1 text-sm text-red-600",role:"alert",children:N[e]})]})},[g,N,k]);return a.jsxs(t,{header:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(i,{href:route("families.index"),className:"text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Back to families list",children:a.jsx(h,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(d,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-2xl text-gray-800 leading-tight",children:"Add New Family"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Register a new family in the parish"})]})]})]}),children:[a.jsx(l,{title:"Add New Family"}),a.jsx("div",{className:"py-8",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[b&&a.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:b}),f&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:f}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:a.jsx(d,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Family Information"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Enter the basic information for the new family"})]})]})}),a.jsxs("form",{onSubmit:_,noValidate:!0,children:[a.jsxs("div",{className:"p-6 space-y-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a.jsx(o,{className:"w-5 h-5 mr-2 text-blue-600"}),"Basic Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(u,{id:"family_name",label:"Family Name",required:!0,placeholder:"e.g., The Njoroge Family",value:g.family_name,error:N.family_name,onChange:e=>k("family_name",e)}),a.jsx(u,{id:"family_code",label:"Family Code",placeholder:"e.g., FAM001 (optional)",value:g.family_code,error:N.family_code,onChange:e=>k("family_code",e)})]}),p&&p.length>0&&a.jsx(M,{id:"head_of_family_id",label:"Head of Family",placeholder:"Select a member as head of family (optional)",options:p.map(e=>({value:e.id,label:`${e.name}${e.phone?` - ${e.phone}`:""}`}))})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-6",children:[a.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a.jsx(n,{className:"w-5 h-5 mr-2 text-blue-600"}),"Contact Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(u,{id:"phone",label:"Phone Number",type:"tel",placeholder:"+254 700 000 000",value:g.phone,error:N.phone,onChange:e=>k("phone",e)}),a.jsx(u,{id:"email",label:"Email Address",type:"email",placeholder:"family@email.com",value:g.email,error:N.email,onChange:e=>k("email",e)})]}),a.jsx(u,{id:"address",label:"Address",type:"textarea",placeholder:"Full address including city and postal code",rows:3,value:g.address,error:N.address,onChange:e=>k("address",e)})]}),a.jsxs("div",{className:"border-t border-gray-200 pt-6 space-y-6",children:[a.jsxs("h4",{className:"text-lg font-medium text-gray-900 flex items-center",children:[a.jsx(x,{className:"w-5 h-5 mr-2 text-blue-600"}),"Parish Information"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx(u,{id:"parish",label:"Parish",placeholder:"e.g., St. Mary's Parish",value:g.parish,error:N.parish,onChange:e=>k("parish",e)}),a.jsx(u,{id:"deanery",label:"Deanery",placeholder:"e.g., Nairobi Deanery",value:g.deanery,error:N.deanery,onChange:e=>k("deanery",e)}),a.jsx(u,{id:"parish_section",label:"Parish Section",placeholder:"e.g., Central Section",value:g.parish_section,error:N.parish_section,onChange:e=>k("parish_section",e)})]})]})]}),a.jsxs("div",{className:"flex justify-end items-center px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-xl space-x-3",children:[a.jsx(i,{href:route("families.index"),className:"px-6 py-2.5 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:v,className:"px-6 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg flex items-center space-x-2 transition-all duration-200 shadow-sm hover:shadow-md disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:[a.jsx(m,{className:"w-4 h-4"}),a.jsx("span",{children:v?"Creating Family...":"Create Family"})]})]})]})]}),(!p||0===p.length)&&a.jsx("div",{className:"mt-6 bg-amber-50 border border-amber-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(c,{className:"h-5 w-5 text-amber-400","aria-hidden":"true"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-amber-800",children:"No Available Members"}),a.jsx("div",{className:"mt-2 text-sm text-amber-700",children:a.jsx("p",{children:"There are no members without families available to assign as head of family. You can create the family first and assign a head of family later when you add members."})}),a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"-mx-2 -my-1.5 flex",children:a.jsx(i,{href:route("members.create"),className:"bg-amber-50 px-2 py-1.5 rounded-md text-sm font-medium text-amber-800 hover:bg-amber-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-amber-50 focus:ring-amber-600",children:"Add Member First"})})})]})]})})]})})]})}export{p as default};
