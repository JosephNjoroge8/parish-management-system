import{j as e}from"./app-CE4iXgnb.js";import{r as s,H as t,L as a,b as r}from"./inertia-CDxxuqzl.js";import{A as l}from"./AuthenticatedLayout-CAzOOrEZ.js";import{C as i}from"./church-Dd200E20.js";import{H as n}from"./heart-hDjSgQlb.js";import{C as d}from"./cross-Cnn9RyRC.js";import{C as c}from"./crown-DP4hGFUU.js";import{B as m}from"./baby-Ba3Hy4FZ.js";import{S as x}from"./search-DsORygC6.js";import{C as o}from"./calendar-jJpZne5F.js";import{E as h}from"./eye-CYms5AqN.js";import{S as p}from"./square-pen-DXFpwGqU.js";import{T as u}from"./trash-2-DKnT_7c8.js";import{M as g}from"./map-pin-D9Ua4C3X.js";import{P as j}from"./plus-BNX_hsqU.js";import"./vendor--zLKLCTa.js";import"./app-BHp0F1kE.js";import"./transition-tl5wXdCp.js";import"./users-Dbj6gQ98.js";import"./user-plus-D75hMPXL.js";const y={baptism:m,eucharist:d,confirmation:c,reconciliation:n,anointing:d,marriage:n,holy_orders:i},f={baptism:"Baptism",eucharist:"First Holy Communion",confirmation:"Confirmation",reconciliation:"Reconciliation",anointing:"Anointing of the Sick",marriage:"Marriage",holy_orders:"Holy Orders"},b={baptism:"text-blue-600 bg-blue-100",eucharist:"text-green-600 bg-green-100",confirmation:"text-purple-600 bg-purple-100",reconciliation:"text-orange-600 bg-orange-100",anointing:"text-yellow-600 bg-yellow-100",marriage:"text-pink-600 bg-pink-100",holy_orders:"text-indigo-600 bg-indigo-100"};function N({auth:n,sacraments:d,filters:c}){var m,N,v,w,_,k,S,A;const[C,$]=s.useState(c.search||""),[D,M]=s.useState(c.sacrament_type||""),[L,E]=s.useState(c.year||""),[F,H]=s.useState(null),T=(null==(N=null==(m=null==n?void 0:n.user)?void 0:m.permissions)?void 0:N.can_edit_sacraments)??!0,P=(null==(w=null==(v=null==n?void 0:n.user)?void 0:v.permissions)?void 0:w.can_delete_sacraments)??!0,B=(null==(k=null==(_=null==n?void 0:n.user)?void 0:_.permissions)?void 0:k.can_view_sacraments)??!0,I=s.useMemo(()=>{const e=d.data.reduce((e,s)=>(e[s.sacrament_type]=(e[s.sacrament_type]||0)+1,e),{});return{total:d.total,...e}},[d.data,d.total]),O=s.useMemo(()=>{const e=new Set;return d.data.forEach(s=>{e.add(new Date(s.date_administered).getFullYear().toString())}),Array.from(e).sort((e,s)=>parseInt(s)-parseInt(e))},[d.data]),R=()=>{r.get(route("sacraments.index"),{search:C,sacrament_type:D,year:L},{preserveState:!0,replace:!0})},U=e=>{var s,t;const a=(null==(s=e.member)?void 0:s.first_name)&&(null==(t=e.member)?void 0:t.last_name)?`${e.member.first_name} ${e.member.last_name}`:"this member";confirm(`Are you sure you want to delete this ${f[e.sacrament_type]} record for ${a}? This action cannot be undone.`)&&(H(e.id),r.delete(route("sacraments.destroy",e.id),{onFinish:()=>H(null),onError:()=>{H(null),alert("Failed to delete sacrament record. Please try again.")}}))};return e.jsxs(l,{header:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg sm:text-xl text-gray-800 leading-tight",children:"Sacramental Records"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Manage baptisms, confirmations, and other sacramental records"})]}),T&&e.jsxs(a,{href:route("sacraments.create"),className:"bg-purple-500 hover:bg-purple-600 text-white px-3 sm:px-4 py-2 rounded-lg flex items-center justify-center space-x-2 transition-colors text-sm sm:text-base",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add Sacrament"}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]}),children:[e.jsx(t,{title:"Sacraments"}),e.jsx("div",{className:"py-6 sm:py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 2xl:grid-cols-7 gap-3 sm:gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(i,{className:"h-6 w-6 sm:h-8 sm:w-8 text-purple-600"})}),e.jsx("div",{className:"ml-2 sm:ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs sm:text-sm font-medium text-gray-500 truncate",children:"Total Records"}),e.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900",children:I.total})]})})]})}),Object.entries(f).map(([s,t])=>{const a=y[s],r=I[s]||0,l=b[s];return e.jsx("div",{className:"bg-white rounded-lg shadow p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex-shrink-0 p-1.5 sm:p-2 rounded-full ${l.split(" ")[1]}`,children:e.jsx(a,{className:`h-4 w-4 sm:h-6 sm:w-6 ${l.split(" ")[0]}`})}),e.jsx("div",{className:"ml-2 sm:ml-3 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-xs font-medium text-gray-500 truncate",title:t,children:t}),e.jsx("dd",{className:"text-base sm:text-lg font-medium text-gray-900",children:r})]})})]})},s)})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col space-y-4 lg:flex-row lg:space-y-0 lg:gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search by member name, certificate number, administered by...",value:C,onChange:e=>$(e.target.value),onKeyPress:e=>{"Enter"===e.key&&R()},className:"w-full pl-10 pr-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex flex-col space-y-3 sm:flex-row sm:space-y-0 sm:space-x-3 lg:space-x-4",children:[e.jsxs("select",{value:D,onChange:e=>M(e.target.value),className:"px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent min-w-0 sm:min-w-[140px]",children:[e.jsx("option",{value:"",children:"All Sacraments"}),Object.entries(f).map(([s,t])=>e.jsx("option",{value:s,children:t},s))]}),e.jsxs("select",{value:L,onChange:e=>E(e.target.value),className:"px-3 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent min-w-0 sm:min-w-[100px]",children:[e.jsx("option",{value:"",children:"All Years"}),O.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:R,className:"flex-1 sm:flex-none bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center justify-center space-x-2 transition-colors text-sm sm:text-base",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Search"})]}),e.jsxs("button",{onClick:()=>{$(""),M(""),E(""),r.get(route("sacraments.index"),{},{preserveState:!0,replace:!0})},className:"flex-1 sm:flex-none bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors text-sm sm:text-base",children:[e.jsx("span",{className:"hidden sm:inline",children:"Clear"}),e.jsx("span",{className:"sm:hidden",children:"Ã—"})]})]})]})]})}),d.data.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:block bg-white rounded-lg shadow-md overflow-hidden mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sacrament"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administered By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Certificate"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.data.map(s=>{var t,r,l;const i=y[s.sacrament_type],n=b[s.sacrament_type];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(null==(t=s.member)?void 0:t.first_name)||"Unknown"," ",(null==(r=s.member)?void 0:r.last_name)||"Member"]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["#",(null==(l=s.member)?void 0:l.member_number)||"N/A"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-1 rounded-full ${n.split(" ")[1]} mr-2`,children:e.jsx(i,{className:`w-4 h-4 ${n.split(" ")[0]}`})}),e.jsx("span",{className:"text-sm text-gray-900",children:f[s.sacrament_type]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(o,{className:"w-4 h-4 text-gray-400 mr-1"}),new Date(s.date_administered).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.administered_by}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.location}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.certificate_number||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[B&&e.jsx(a,{href:route("sacraments.show",s.id),className:"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-50 transition-colors",title:"View",children:e.jsx(h,{className:"w-4 h-4"})}),T&&e.jsx(a,{href:route("sacraments.edit",s.id),className:"text-yellow-600 hover:text-yellow-800 p-2 rounded hover:bg-yellow-50 transition-colors",title:"Edit",children:e.jsx(p,{className:"w-4 h-4"})}),P&&e.jsx("button",{onClick:()=>U(s),disabled:F===s.id,className:"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-50 transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(u,{className:"w-4 h-4"})})]})})]},s.id)})})]})})}),e.jsx("div",{className:"hidden md:block lg:hidden bg-white rounded-lg shadow-md overflow-hidden mb-6",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member & Sacrament"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date & Location"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.data.map(s=>{var t,r;const l=y[s.sacrament_type],i=b[s.sacrament_type];return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[(null==(t=s.member)?void 0:t.first_name)||"Unknown"," ",(null==(r=s.member)?void 0:r.last_name)||"Member"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-1 rounded-full ${i.split(" ")[1]} mr-2`,children:e.jsx(l,{className:`w-3 h-3 ${i.split(" ")[0]}`})}),e.jsx("span",{className:"text-xs text-gray-600",children:f[s.sacrament_type]})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-gray-900",children:new Date(s.date_administered).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-gray-600 truncate max-w-[120px]",children:s.location})]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end space-x-1",children:[B&&e.jsx(a,{href:route("sacraments.show",s.id),className:"text-blue-600 hover:text-blue-800 p-1.5 rounded hover:bg-blue-50 transition-colors",title:"View",children:e.jsx(h,{className:"w-3 h-3"})}),T&&e.jsx(a,{href:route("sacraments.edit",s.id),className:"text-yellow-600 hover:text-yellow-800 p-1.5 rounded hover:bg-yellow-50 transition-colors",title:"Edit",children:e.jsx(p,{className:"w-3 h-3"})}),P&&e.jsx("button",{onClick:()=>U(s),disabled:F===s.id,className:"text-red-600 hover:text-red-800 p-1.5 rounded hover:bg-red-50 transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(u,{className:"w-3 h-3"})})]})})]},s.id)})})]})})}),e.jsx("div",{className:"md:hidden grid grid-cols-1 gap-3 sm:gap-4 mb-6",children:d.data.map(s=>{var t,r,l;const n=y[s.sacrament_type],d=b[s.sacrament_type];return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 sm:p-5",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-full ${d.split(" ")[1]} flex-shrink-0`,children:e.jsx(n,{className:`w-4 h-4 sm:w-5 sm:h-5 ${d.split(" ")[0]}`})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-medium text-gray-900 truncate",children:[(null==(t=s.member)?void 0:t.first_name)||"Unknown"," ",(null==(r=s.member)?void 0:r.last_name)||"Member"]}),e.jsx("p",{className:"text-sm text-gray-600",children:f[s.sacrament_type]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["#",(null==(l=s.member)?void 0:l.member_number)||"N/A"]})]})]})}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(o,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:new Date(s.date_administered).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(i,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.administered_by})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(g,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.location})]}),s.certificate_number&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium mr-2 flex-shrink-0",children:"Certificate:"}),e.jsx("span",{className:"truncate",children:s.certificate_number})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-2 border-t border-gray-100",children:[B&&e.jsx(a,{href:route("sacraments.show",s.id),className:"text-blue-600 hover:text-blue-800 p-2 rounded hover:bg-blue-50 transition-colors",title:"View",children:e.jsx(h,{className:"w-4 h-4"})}),T&&e.jsx(a,{href:route("sacraments.edit",s.id),className:"text-yellow-600 hover:text-yellow-800 p-2 rounded hover:bg-yellow-50 transition-colors",title:"Edit",children:e.jsx(p,{className:"w-4 h-4"})}),P&&e.jsx("button",{onClick:()=>U(s),disabled:F===s.id,className:"text-red-600 hover:text-red-800 p-2 rounded hover:bg-red-50 transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(u,{className:"w-4 h-4"})})]})]},s.id)})}),d.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between bg-white px-3 sm:px-4 lg:px-6 py-3 border-t border-gray-200 rounded-lg shadow",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[(null==(S=d.links[0])?void 0:S.url)&&e.jsx(a,{href:d.links[0].url,className:"relative inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),(null==(A=d.links[d.links.length-1])?void 0:A.url)&&e.jsx(a,{href:d.links[d.links.length-1].url,className:"ml-3 relative inline-flex items-center px-3 py-2 border border-gray-300 text-xs font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-xs sm:text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:d.from})," to"," ",e.jsx("span",{className:"font-medium",children:d.to})," of"," ",e.jsx("span",{className:"font-medium",children:d.total})," results"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:d.links.map((s,t)=>e.jsx(a,{href:s.url||"#",className:`relative inline-flex items-center px-2 sm:px-4 py-2 border text-xs sm:text-sm font-medium ${s.active?"z-10 bg-purple-50 border-purple-500 text-purple-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${0===t?"rounded-l-md":""} ${t===d.links.length-1?"rounded-r-md":""} ${s.url?"":"cursor-not-allowed opacity-50"}`,dangerouslySetInnerHTML:{__html:s.label}},t))})})]})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sm:p-8 text-center",children:[e.jsx(i,{className:"mx-auto h-10 w-10 sm:h-12 sm:w-12 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-base sm:text-lg font-medium text-gray-900 mb-2",children:"No sacramental records found"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mb-4",children:C||D||L?"Try adjusting your search criteria.":"Get started by adding your first sacramental record."}),T&&!C&&!D&&!L&&e.jsxs(a,{href:route("sacraments.create"),className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg inline-flex items-center space-x-2 transition-colors text-sm sm:text-base",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:"Add First Sacrament"})]})]})]})})]})}export{N as default};
