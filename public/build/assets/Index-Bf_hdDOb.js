import{j as e,X as s}from"./app-CE4iXgnb.js";import{r,H as a,L as t,b as l}from"./inertia-CDxxuqzl.js";import{A as i}from"./AuthenticatedLayout-CAzOOrEZ.js";import{H as d,U as n}from"./users-Dbj6gQ98.js";import{T as c}from"./trending-up-B2lX3q_e.js";import{S as m}from"./search-DsORygC6.js";import{F as x}from"./funnel-CdFLKB9r.js";import{C as o}from"./chevron-down-x319VfwJ.js";import{P as h}from"./phone-B6VxcByF.js";import{M as p}from"./mail-Dnz-yILG.js";import{M as u}from"./map-pin-D9Ua4C3X.js";import{C as g}from"./calendar-jJpZne5F.js";import{E as j}from"./eye-CYms5AqN.js";import{S as f}from"./square-pen-DXFpwGqU.js";import{T as b}from"./trash-2-DKnT_7c8.js";import{P as y}from"./plus-BNX_hsqU.js";import"./vendor--zLKLCTa.js";import"./app-BHp0F1kE.js";import"./transition-tl5wXdCp.js";import"./user-plus-D75hMPXL.js";function N({families:N,stats:v,filters:w,filterOptions:_,success:k,error:S,auth:C}){var A,F,M,P;const[$,D]=r.useState(!1),[T,z]=r.useState(w.search||""),[H,L]=r.useState({parish_section:w.parish_section||"",deanery:w.deanery||"",parish:w.parish||"",year:w.year||"",min_members:w.min_members||"",max_members:w.max_members||""}),U=(e,s)=>{L(r=>({...r,[e]:s}))},E=e=>{const s=w.sort===e&&"asc"===w.direction?"desc":"asc";l.get(route("families.index"),{...w,sort:e,direction:s},{preserveState:!0,replace:!0})},O=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(s){return"Invalid date"}},Y=e=>w.sort!==e?null:"asc"===w.direction?"↑":"↓",q=(e,s)=>{try{return route(e,s)}catch(r){return"#"}};return e.jsxs(i,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(d,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl text-gray-800 leading-tight",children:"Families Management"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage parish family records and relationships"})]})]}),e.jsxs(t,{href:q("families.create"),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 py-2.5 rounded-lg flex items-center space-x-2 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Family"})]})]}),children:[e.jsx(a,{title:"Families Management"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[k&&e.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg",children:k}),S&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:S}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(d,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Families"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.total_families})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(n,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"With Active Members"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.families_with_active_members})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(c,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"New This Year"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.new_this_year})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(n,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg. Family Size"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.average_family_size})]})]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 mb-8",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("form",{onSubmit:e=>{e.preventDefault(),l.get(route("families.index"),{...w,search:T,page:1},{preserveState:!0,replace:!0})},className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:T,onChange:e=>z(e.target.value),placeholder:"Search families by name, code, address, phone...",className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),e.jsxs("button",{onClick:()=>D(!$),className:"flex items-center space-x-2 px-4 py-2.5 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{children:"Filters"}),e.jsx(o,{className:"w-4 h-4 transition-transform "+($?"rotate-180":"")})]})]}),$&&e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parish Section"}),e.jsxs("select",{value:H.parish_section,onChange:e=>U("parish_section",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Sections"}),_.parish_sections.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deanery"}),e.jsxs("select",{value:H.deanery,onChange:e=>U("deanery",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Deaneries"}),_.deaneries.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parish"}),e.jsxs("select",{value:H.parish,onChange:e=>U("parish",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Parishes"}),_.parishes.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year"}),e.jsxs("select",{value:H.year,onChange:e=>U("year",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Years"}),_.years.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Members"}),e.jsx("input",{type:"number",value:H.min_members,onChange:e=>U("min_members",e.target.value),placeholder:"0",min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Members"}),e.jsx("input",{type:"number",value:H.max_members,onChange:e=>U("max_members",e.target.value),placeholder:"∞",min:"0",className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-6",children:[e.jsxs("button",{onClick:()=>{l.get(route("families.index"),{...w,...H,search:T,page:1},{preserveState:!0,replace:!0}),D(!1)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(x,{className:"w-4 h-4"}),e.jsx("span",{children:"Apply Filters"})]}),e.jsxs("button",{onClick:()=>{z(""),L({parish_section:"",deanery:"",parish:"",year:"",min_members:"",max_members:""}),l.get(route("families.index"),{},{preserveState:!0,replace:!0}),D(!1)},className:"border border-gray-300 hover:bg-gray-50 text-gray-700 px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{children:"Clear All"})]})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{onClick:()=>E("family_name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Family Name"}),e.jsx("span",{className:"text-blue-500",children:Y("family_name")})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Head of Family"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Parish Section"}),e.jsx("th",{onClick:()=>E("members_count"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Members"}),e.jsx("span",{className:"text-blue-500",children:Y("members_count")})]})}),e.jsx("th",{onClick:()=>E("created_at"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Created"}),e.jsx("span",{className:"text-blue-500",children:Y("created_at")})]})}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.data&&N.data.length>0?N.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.family_name||"Unknown Family"}),s.family_code&&e.jsxs("div",{className:"text-sm text-gray-500",children:["Code: ",s.family_code]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.head_of_family?e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.head_of_family.full_name||`${s.head_of_family.first_name||""} ${s.head_of_family.last_name||""}`.trim()||"Unknown"}),s.head_of_family.phone&&e.jsx("div",{className:"text-sm text-gray-500",children:s.head_of_family.phone})]}):e.jsx("span",{className:"text-sm text-gray-500",children:"No head assigned"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[s.phone&&e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(h,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`tel:${s.phone}`,className:"hover:text-blue-600",children:s.phone})]}),s.email&&e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(p,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("a",{href:`mailto:${s.email}`,className:"hover:text-blue-600",children:s.email})]}),s.address&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(u,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"truncate max-w-xs",children:s.address})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:"text-sm text-gray-900",children:s.parish_section||"Not specified"}),s.deanery&&e.jsx("div",{className:"text-sm text-gray-500",children:s.deanery})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[s.members_count||0," total"]}),s.active_members_count>0&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[s.active_members_count," active"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),O(s.created_at)]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(t,{href:q("families.show",s.id),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"View Family",children:e.jsx(j,{className:"w-4 h-4"})}),e.jsx(t,{href:q("families.edit",s.id),className:"text-amber-600 hover:text-amber-900 p-1 rounded",title:"Edit Family",children:e.jsx(f,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{return e=s.id,void(confirm("Are you sure you want to delete this family? All members will be removed from the family.")&&l.delete(route("families.destroy",e),{onSuccess:()=>{},onError:()=>{}}));var e},className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete Family",children:e.jsx(b,{className:"w-4 h-4"})})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No families found"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Object.values(w).some(Boolean)?"Try adjusting your search or filters":"Get started by adding your first family"})]}),!Object.values(w).some(Boolean)&&e.jsxs(t,{href:q("families.create"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Add First Family"})]})]})})})})]})}),N.data&&N.data.length>0&&N.links&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[N.links.prev&&e.jsx(t,{href:N.links.prev,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),N.links.next&&e.jsx(t,{href:N.links.next,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",e.jsx("span",{className:"font-medium",children:(null==(A=N.meta)?void 0:A.from)||0})," to"," ",e.jsx("span",{className:"font-medium",children:(null==(F=N.meta)?void 0:F.to)||0})," of"," ",e.jsx("span",{className:"font-medium",children:(null==(M=N.meta)?void 0:M.total)||0})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:null==(P=N.links)?void 0:P.map((s,r)=>e.jsx(t,{href:s.url||"#",className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${s.active?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"} ${0===r?"rounded-l-md":""} ${r===N.links.length-1?"rounded-r-md":""}`,dangerouslySetInnerHTML:{__html:s.label}},r))})})]})]})})]})]})})]})}export{N as default};
