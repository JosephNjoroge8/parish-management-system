import{c as e,j as s}from"./app-D-87LwF0.js";import{r as t,H as a,L as i}from"./inertia-CDxxuqzl.js";import{A as r}from"./AuthenticatedLayout-XalLJsaz.js";import{D as l,U as c,C as n}from"./users-bxVbXqF1.js";import{T as d}from"./trending-up-SSlzVnO9.js";import{C as x}from"./credit-card-DNgxYE6T.js";import{C as m}from"./circle-alert-BgZRNbb9.js";import{A as o}from"./arrow-left-tRuncKUE.js";import{D as h}from"./download-ZrrWW8_Z.js";import"./vendor--zLKLCTa.js";import"./app-iHDk2OQF.js";import"./transition-tl5wXdCp.js";import"./user-plus-CndCSYvC.js";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=e("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),g=e("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),j=e("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);function u({auth:e,financial_data:u,period:y,year:f,filters:N}){var b,v,w,k;const[_,C]=t.useState("overview"),[T,M]=t.useState("bar"),A=(null==(v=null==(b=null==e?void 0:e.user)?void 0:b.permissions)?void 0:v.can_view_financial_reports)??!0,F=(null==(k=null==(w=null==e?void 0:e.user)?void 0:w.permissions)?void 0:k.can_export_reports)??!0,S=e=>new Intl.NumberFormat("en-KE",{style:"currency",currency:"KES"}).format(e),O={tithe:"Tithe",offering:"Offering",thanksgiving:"Thanksgiving",project:"Project Contribution",special:"Special Offering"},$={cash:"Cash",cheque:"Cheque",bank_transfer:"Bank Transfer",mobile_money:"Mobile Money",card:"Card"},P={tithe:"bg-emerald-500",offering:"bg-blue-500",thanksgiving:"bg-yellow-500",project:"bg-purple-500",special:"bg-pink-500"},q={cash:"bg-green-500",cheque:"bg-blue-500",bank_transfer:"bg-purple-500",mobile_money:"bg-orange-500",card:"bg-indigo-500"},D=Object.values(u.by_type).reduce((e,s)=>e+s,0),z=Object.values(u.by_method).reduce((e,s)=>e+s,0);return A?s.jsxs(r,{header:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(i,{href:route("reports.index"),className:"text-gray-600 hover:text-gray-900 transition-colors",children:s.jsx(o,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Financial Summary Report"}),s.jsxs("p",{className:"text-sm text-gray-600",children:[y," ",f," - Comprehensive financial analysis"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["overview","trends","breakdown"].map(e=>s.jsx("button",{onClick:()=>C(e),className:"px-3 py-1 text-sm font-medium capitalize rounded-md transition-colors "+(_===e?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e},e))}),F&&s.jsxs(i,{href:route("reports.financial.export",{period:y,year:f}),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[s.jsx(h,{className:"w-4 h-4"}),s.jsx("span",{children:"Export"})]})]})]}),children:[s.jsx(a,{title:`Financial Summary - ${y} ${f}`}),s.jsx("div",{className:"py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Contributions"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(u.total_amount)})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(l,{className:"h-8 w-8 text-green-600"})})]}),s.jsxs("div",{className:"mt-4 flex items-center",children:[u.period_growth>=0?s.jsx(d,{className:"h-4 w-4 text-green-500 mr-1"}):s.jsx(j,{className:"h-4 w-4 text-red-500 mr-1"}),s.jsx("span",{className:"text-sm font-medium "+(u.period_growth>=0?"text-green-600":"text-red-600"),children:(E=u.period_growth,`${E>=0?"+":""}${E.toFixed(1)}%`)}),s.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs previous period"})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Average Contribution"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(u.statistics.average_contribution)})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(g,{className:"h-8 w-8 text-blue-600"})})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Per contribution transaction"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Contributors"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.statistics.total_contributors})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(c,{className:"h-8 w-8 text-purple-600"})})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Unique contributing members"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Highest Contribution"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:S(u.statistics.highest_single_contribution)})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx(d,{className:"h-8 w-8 text-orange-600"})})]}),s.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"Single largest contribution"})]})]}),"overview"===_&&s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Contributions by Type"}),s.jsx(p,{className:"w-5 h-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(u.by_type).map(([e,t])=>{const a=D>0?t/D*100:0,i=P[e];return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${i}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:O[e]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S(t)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[a.toFixed(1),"%"]})]})]},e)})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment Methods"}),s.jsx(x,{className:"w-5 h-5 text-gray-400"})]}),s.jsx("div",{className:"space-y-4",children:Object.entries(u.by_method).map(([e,t])=>{const a=z>0?t/z*100:0,i=q[e];return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${i}`}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:$[e]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S(t)}),s.jsxs("div",{className:"text-xs text-gray-500",children:[a.toFixed(1),"%"]})]})]},e)})})]})]}),"trends"===_&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Monthly Trends"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>M("bar"),className:"p-2 rounded "+("bar"===T?"bg-blue-100 text-blue-600":"text-gray-400"),children:s.jsx(n,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>M("pie"),className:"p-2 rounded "+("pie"===T?"bg-blue-100 text-blue-600":"text-gray-400"),children:s.jsx(p,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Month"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tithe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Offerings"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Special"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Projects"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.monthly_data.map((e,t)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.month}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:S(e.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.tithe)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.offering)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.special)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.project)})]},t))})]})})]}),"breakdown"===_&&s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-6 flex items-center",children:[s.jsx(c,{className:"w-5 h-5 mr-2 text-blue-600"}),"Top Contributors"]}),s.jsx("div",{className:"overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contributions"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Average"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.top_contributors.map((e,t)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsxs("span",{className:"text-sm font-medium text-blue-600",children:["#",t+1]})}),s.jsx("div",{className:"ml-3",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.member_name})})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:S(e.total_amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.contribution_count}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:S(e.total_amount/e.contribution_count)})]},t))})]})})]}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx(m,{className:"w-5 h-5 text-blue-600 mr-2"}),s.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Key Insights"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Most Active Month:"})," ",u.statistics.most_active_month]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Contribution Frequency:"}),u.statistics.total_contributors>0?` ${(u.monthly_data.length/u.statistics.total_contributors).toFixed(1)} contributions per member`:" No data available"]})]})]})]})]})})]}):s.jsxs(r,{children:[s.jsx(a,{title:"Financial Reports - Access Denied"}),s.jsx("div",{className:"py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-red-700",children:"You don't have permission to view financial reports. Please contact an administrator."})]})})})]});var E}export{u as default};
